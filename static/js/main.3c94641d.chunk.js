(this["webpackJsonpthreejs-journey-level-1"]=this["webpackJsonpthreejs-journey-level-1"]||[]).push([[0],{62:function(e,t,n){"use strict";n.r(t);var a=n(49),r=n(7),o=n(3),c=n(18),i=n(66),s=n(9),u=n(23),j=n(0),l=n(4),b=n(5),f=n(53),O=n(50),m=n(54),d=n(11),g=["tintColor"],h=function(e){Object(l.a)(n,e);var t=Object(b.a)(n);function n(e,a){var r;return Object(j.a)(this,n),(r=t.call(this,new o.Vector2(e.width,e.height))).radius=.1,r.strength=.1,r.threshold=0,r.basic.onBeforeCompile=function(e){e.uniforms.uContrast={value:1.1},e.uniforms.uOffset={value:-.1},e.uniforms.uTint={value:new o.Color(a)},e.fragmentShader=e.fragmentShader.replace("#include <common>","\n          #include <common>\n          uniform float uContrast;\n          uniform float uOffset;\n          uniform vec3 uTint;\n        "),e.fragmentShader=e.fragmentShader.replace("#include <output_fragment>","\n          gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n          gl_FragColor.rgb *= uContrast;\n          gl_FragColor.rgb += uOffset;\n          gl_FragColor.rgb += uTint;\n        ")},r}return n}(m.a);Object(c.d)({EffectComposer:f.a,RenderPass:O.a,TintPass:h});var v=function(e){var t=e.tintColor,n=void 0===t?920089:t,a=Object(u.a)(e,g),i=Object(c.g)(),j=i.size,l=i.gl,b=i.scene,f=i.camera,O=Object(r.useMemo)((function(){return new o.WebGLMultisampleRenderTarget(j.width,j.height,{generateMipmaps:!0,minFilter:o.LinearFilter,magFilter:o.LinearFilter,format:o.RGBAFormat,stencilBuffer:!1,encoding:o.sRGBEncoding})}),[j.width,j.height]),m=Object(r.useRef)();return Object(c.e)((function(){return m.current.render()}),1),Object(d.jsxs)("effectComposer",Object(s.a)(Object(s.a)({},a),{},{ref:m,args:[l,O],children:[Object(d.jsx)("renderPass",{attachFns:["addPass"],args:[b,f]}),Object(d.jsx)("tintPass",{attachFns:["addPass"],args:[j,n]})]}))},p=n(10),x=n(21),M=n(52),S=["children","config","minPolarAngle","maxPolarAngle","rotation"],C=function(e){var t=e.children,n=e.config,a=e.minPolarAngle,r=void 0===a?Math.PI/-4:a,i=e.maxPolarAngle,j=void 0===i?Math.PI/2:i,l=e.rotation,b=void 0===l?[0,0,0]:l,f=Object(u.a)(e,S),O=Object(c.g)(),m=O.scene,g=O.invalidate,h=O.size,v=O.gl,C=Object(x.useSpring)((function(){return Object(s.a)(Object(s.a)({},f),{},{rotation:b,config:Object(s.a)({tension:350,mass:2,friction:20,precision:1e-4},n),onChange:function(e){var n=e.value.rotation,a=Object(p.a)(n,3),r=a[0],o=a[1],c=a[2];t||m.rotation.set(r,o,c),g()}})})),T=Object(p.a)(C,2),P=T[0],y=T[1];return Object(M.useDrag)((function(e){var t=Object(p.a)(e.movement,1)[0],n=e.down,a=Object(p.a)(b,3),c=a[0],i=a[2];t=o.MathUtils.clamp(t/h.width,r,j),y.start({rotation:n?[c,1.25*t,i]:b})}),{target:v.domElement}),Object(d.jsx)(x.a.group,Object(s.a)(Object(s.a)({},P),{},{children:t}))},T=n(65),P=function(){var e=Object(T.a)("/level.glb").nodes,t=Object(c.g)().camera;return Object(x.useSpring)({from:{y:t.position.y+5},to:{y:t.position.y},delay:300,config:{friction:100},onChange:function(e){var n=e.value.y;t.position.y=n,t.lookAt(0,0,0)}}),Object(d.jsx)("primitive",{object:e.Level})},y=function(){var e=Object(T.a)("/level.glb").nodes,t=Object(r.useState)([0,0,0]),n=Object(p.a)(t,2),a=n[0],o=n[1],c=Object(x.useSpring)({rotation:a,config:{friction:40}});return Object(r.useEffect)((function(){var t;e.SudoHead.position.x-=.02,e.SudoHead.position.y-=.04,e.SudoHead.position.z+=.03;return function e(){o([.8+.4*Math.random(),.25+.25*Math.random(),0]),t=setTimeout(e,1e3*(1+3*Math.random()))}(),function(){clearTimeout(t)}}),[]),Object(d.jsxs)(d.Fragment,{children:[Object(d.jsx)(x.a.primitive,Object(s.a)(Object(s.a)({},c),{},{"rotation-order":"YXZ",object:e.SudoHead})),Object(d.jsx)("primitive",{object:e.Sudo})]})},F=function(){var e=Object(T.a)("/level.glb").nodes,t=Object(r.useState)(0),n=Object(p.a)(t,2),a=n[0],o=n[1],c=Object(x.useSpring)({"rotation-z":a,config:{friction:40}});return Object(r.useEffect)((function(){var e;return function t(){o(Math.random()),e=setTimeout(t,1e3*(1+5*Math.random()))}(),function(){clearTimeout(e)}}),[]),Object(d.jsx)(x.a.primitive,Object(s.a)(Object(s.a)({},c),{},{object:e.Camera}))},w=function(){var e=Object(T.a)("/level.glb").nodes,t=Object(r.useRef)({value:0});return Object(c.e)((function(e){var n=e.clock;return t.current.value=1e3*n.elapsedTime})),Object(d.jsx)("primitive",{object:e.Cactus,"material-onBeforeCompile":function(e){e.uniforms.uTime=t.current,e.vertexShader=e.vertexShader.replace("#include <common>","\n            #include <common>\n            uniform float uTime;\n\n            vec2 rotate(vec2 v, float a) {\n              float s = sin(a);\n              float c = cos(a);\n              mat2 m = mat2(c, -s, s, c);\n              return m * v;\n            }\n          "),e.vertexShader=e.vertexShader.replace("#include <begin_vertex>","\n            #include <begin_vertex>\n\n            float angleMultiplier = 0.25;\n            float timeFrequency = 0.002;\n            float elevationOffsetMultiplier = 3.0;\n\n            vec2 transformedRotated = rotate(transformed.xz, sin(uTime * timeFrequency + transformed.z * elevationOffsetMultiplier) * log(abs(transformed.z) + 1.0) * angleMultiplier);\n            transformed.xz = transformedRotated;\n          ")}})},z=n(64),E=function(){var e=Object(T.a)("/level.glb").nodes,t=Object(z.a)("/pink.jpg"),n=Object(r.useState)(!1),a=Object(p.a)(n,2),o=a[0],c=a[1],i=Object(r.useState)([0,0,0]),u=Object(p.a)(i,2),j=u[0],l=u[1],b=Object(x.useSpring)({position:[0,o?.2:0,0],config:{friction:80}}),f=Object(x.useSpring)({rotation:j,config:{friction:40}});return Object(r.useEffect)((function(){var e,t=0,n=0;return function a(){t+=Math.ceil(3*Math.random()),n+=Math.ceil(3*Math.random()),c((function(e){return!e})),l([t*Math.PI*.5,n*Math.PI*.5,0]),e=setTimeout(a,1500)}(),function(){clearTimeout(e)}}),[]),Object(d.jsx)(x.a.group,Object(s.a)(Object(s.a)({},b),{},{children:Object(d.jsx)(x.a.primitive,Object(s.a)(Object(s.a)({},f),{},{object:e.Cube,children:Object(d.jsx)("meshMatcapMaterial",{matcap:t})}))}))},R=function(){var e=Object(T.a)("/level.glb").nodes,t=Object(z.a)("/cyan.jpg"),n=Object(r.useState)([0,0,0]),a=Object(p.a)(n,2),o=a[0],c=a[1],i=Object(x.useSpring)({rotation:o,config:{friction:80}});return Object(r.useEffect)((function(){var e;return function t(){c([(Math.random()-.5)*Math.PI*3,0,(Math.random()-.5)*Math.PI*3]),e=setTimeout(t,1e3*(.5+2*Math.random()))}(),function(){clearTimeout(e)}}),[]),Object(d.jsx)(x.a.primitive,Object(s.a)(Object(s.a)({},i),{},{object:e.Pyramid,children:Object(d.jsx)("meshMatcapMaterial",{matcap:t})}))};Object(a.render)(Object(d.jsx)(r.Suspense,{fallback:Object(d.jsx)(i.a,{}),children:Object(d.jsxs)(c.a,{dpr:[1,2],gl:{toneMapping:o.NoToneMapping},camera:{fov:25,position:[5,1,5]},children:[Object(d.jsx)("color",{attach:"background",args:[13683711]}),Object(d.jsx)(v,{}),Object(d.jsx)(C,{}),Object(d.jsxs)("group",{dispose:null,"position-y":-.75,children:[Object(d.jsx)(P,{}),Object(d.jsx)(y,{}),Object(d.jsx)(F,{}),Object(d.jsx)(w,{}),Object(d.jsx)(E,{}),Object(d.jsx)(R,{})]})]})}),document.getElementById("root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.3c94641d.chunk.js.map